<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Identifying outbound IP addresses of a Azure Function | Lagging Indicators</title>
<meta name="keywords" content="analytics, coding, data-engineering">
<meta name="description" content="Here is Microsoft&rsquo;s documentation page on the topic. The only reason I am documenting this is because the Azure Resource Explorer failed to load consistently across devices for me. Some tutorials I found, like this one, seem to be outdated and the outbound IP addresses weren&rsquo;t listed in any Properties menu in the Function App in the Azure Portal. The Azure CLI method was what worked for me:
az functionapp show --resource-group &lt;GROUP_NAME&gt; --name &lt;APP_NAME&gt; --query outboundIpAddresses --output tsv
az functionapp show --resource-group &lt;GROUP_NAME&gt; --name &lt;APP_NAME&gt; --query possibleOutboundIpAddresses --output tsv
I wanted this as I was hoping to whitelist the IP addresses in the database firewall to allow for scheduling some SQL scripts to run daily. The issue with this is the following, copied from the above linked Microsoft documentation: &ldquo;because of autoscaling behaviors, the outbound IP can change at any time when running on a Consumption plan or in a Premium plan.&rdquo; While at least a few people say whitelist these IPs anyway, the recommended course of action is to set up a virtual network within Azure.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/identifying-outbound-ip-addresses-of-a-azure-function/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.9de45e225101e4f99701d2b68fc6b8a1ef6027928be6391fa15bf7f56326c909.css" integrity="sha256-neReIlEB5PmXAdK2j8a4oe9gJ5KL5jkfoVv39WMmyQk=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/identifying-outbound-ip-addresses-of-a-azure-function/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Lagging Indicators (Alt + H)">Lagging Indicators</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives/" title="All posts">
                    <span>All posts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;Â»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Identifying outbound IP addresses of a Azure Function
    </h1>
    <div class="post-meta"><span title='2024-05-01 00:00:00 +0000 UTC'>May 1, 2024</span>

</div>
  </header> 
  <div class="post-content"><p>Here is <a href="https://learn.microsoft.com/en-us/azure/azure-functions/ip-addresses?tabs=portal">Microsoft&rsquo;s documentation page on the topic</a>. The only reason I am documenting this is because the Azure Resource Explorer failed to load consistently across devices for me. Some tutorials I found, like <a href="https://rubberduckdev.com/app-outbound-ip/">this one</a>, seem to be outdated and the outbound IP addresses weren&rsquo;t listed in any Properties menu in the Function App in the Azure Portal. The Azure CLI method was what worked for me:</p>
<pre tabindex="0"><code>az functionapp show --resource-group &lt;GROUP_NAME&gt; --name &lt;APP_NAME&gt; --query outboundIpAddresses --output tsv
az functionapp show --resource-group &lt;GROUP_NAME&gt; --name &lt;APP_NAME&gt; --query possibleOutboundIpAddresses --output tsv
</code></pre><p>I wanted this as I was hoping to whitelist the IP addresses in the database firewall to allow for scheduling some SQL scripts to run daily. The issue with this is the following, copied from the above linked Microsoft documentation: &ldquo;because of autoscaling behaviors, the outbound IP can change at any time when running on a <a href="https://learn.microsoft.com/en-us/azure/azure-functions/consumption-plan">Consumption plan</a> or in a <a href="https://learn.microsoft.com/en-us/azure/azure-functions/functions-premium-plan">Premium plan</a>.&rdquo; While at least a few people say <a href="https://stackoverflow.com/questions/49109310/how-to-allow-azure-function-to-access-database-hosted-on-azure-vm">whitelist these IPs anyway</a>, the recommended course of action is to set up a virtual network within Azure.</p>
<p>GitHub Actions also does <a href="https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners/about-github-hosted-runners#larger-runners">not support static IP addresses</a> through the general free hosted option it looks like - while I can get the IP addresses they use, it is <a href="https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners/about-github-hosted-runners#ip-addresses">against best practices to whitelist these</a>, and they are updated weekly.</p>
<p>How permissions work for a hosted tool is a consistent aspect I need to consider when evaluating new solutions:</p>
<ul>
<li>
<p>How does the hosted tool get permission to access a private database?</p>
</li>
<li>
<p>What adapters does it support (either officially or community driven)?</p>
</li>
<li>
<p>Would it rely on direct queries to the database or through a REST API?</p>
</li>
<li>
<p>Where do I store the environment secrets in the tool? How is that secured? Is this a paid feature? What does the process look like to update or rotate these secrets?</p>
</li>
<li>
<p>How do I test the tool locally using the correct credentials? For example, with an Azure Function, I can use a <code>local.settings.json</code> file to include environment variables that will be accessible from the App Settings in the Function App.</p>
</li>
<li>
<p>Is there a set of outbound IP addresses that the tool will try to access our data from that we can whitelist, or do we need a more sophisticated approach?</p>
</li>
<li>
<p>How does any regulation around data sharing work here, e.g., if there is PII or PHI data, are there issues with which tools pull data and how they connect?</p>
</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/analytics/">Analytics</a></li>
      <li><a href="http://localhost:1313/tags/coding/">Coding</a></li>
      <li><a href="http://localhost:1313/tags/data-engineering/">Data-Engineering</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/joint-conditional-probabilities-with-pd-crosstab/">
    <span class="title">Â« Prev</span>
    <br>
    <span>Joint &amp;amp; conditional probabilities with pd.crosstab</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/why-not-write-online/">
    <span class="title">Next Â»</span>
    <br>
    <span>Why (not) write online?</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Lagging Indicators</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
